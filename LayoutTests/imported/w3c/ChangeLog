2022-03-22  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, reverting r291546.
        https://bugs.webkit.org/show_bug.cgi?id=238218

        7% regression in Speedometer2/jQuery-TodoMVC

        Reverted changeset:

        "Fix CSS cascade regarding logical properties"
        https://bugs.webkit.org/show_bug.cgi?id=236199
        https://commits.webkit.org/r291546

2022-03-22  Ziran Sun  <zsun@igalia.com>

        [selection] Change form's selection attribute to unsigned long
        https://bugs.webkit.org/show_bug.cgi?id=237951

        Reviewed by Chris Dumez.

        Update test expectations as more sub-tests are now passing.
        * web-platform-tests/html/semantics/forms/textfieldselection/selection-expected.txt:
        * web-platform-tests/html/semantics/forms/textfieldselection/selection-start-end-expected.txt:
        * web-platform-tests/html/semantics/forms/textfieldselection/textfieldselection-setSelectionRange-expected.txt:

2022-03-21  Alex Christensen  <achristensen@webkit.org>

        Implement CSSNumericValue.mul, div, add, sub, max, and min
        https://bugs.webkit.org/show_bug.cgi?id=238153

        Reviewed by Simon Fraser.

        * web-platform-tests/css/css-typed-om/stylevalue-subclasses/numeric-objects/arithmetic.tentative-expected.txt:

2022-03-21  Oriol Brufau  <obrufau@igalia.com>

        [css-cascade] Let revert-layer roll back to preshints
        https://bugs.webkit.org/show_bug.cgi?id=237532

        Reviewed by Darin Adler.

        Add test.

        * web-platform-tests/css/css-cascade/presentational-hints-rollback-expected.txt: Added.
        * web-platform-tests/css/css-cascade/presentational-hints-rollback.html: Added.

2022-03-21  Chris Dumez  <cdumez@apple.com>

        BroadcastChannel instances in distinct opaque origins can communicate
        https://bugs.webkit.org/show_bug.cgi?id=238090
        <rdar://problem/90511155>

        Reviewed by Alex Christensen.

        Import web-platform-tests test coverage.

        * web-platform-tests/webmessaging/broadcastchannel/opaque-origin-expected.txt: Added.
        * web-platform-tests/webmessaging/broadcastchannel/opaque-origin.html: Added.
        * web-platform-tests/webmessaging/broadcastchannel/w3c-import.log:

2022-03-21  Ziran Sun  <zsun@igalia.com>

        [selection] HTMLTextFormControlElement::subtreeHasChanged() shouldn't be called in setRangeText
        https://bugs.webkit.org/show_bug.cgi?id=237720

        Reviewed by Chris Dumez.

        Update test expectations as more sub-tests are now passing.
        * web-platform-tests/html/semantics/forms/textfieldselection/selection-value-interactions-expected.txt:
        * web-platform-tests/html/semantics/forms/textfieldselection/textfieldselection-setRangeText-expected.txt:

2022-03-20  Oriol Brufau  <obrufau@igalia.com>

        Fix CSS cascade regarding logical properties
        https://bugs.webkit.org/show_bug.cgi?id=236199

        Reviewed by Darin Adler.

        Expect animation-004.html to pass.
        Add new test logicalprops-with-deferred-writing-mode.html

        * web-platform-tests/css/css-logical/animation-004-expected.txt:
        * web-platform-tests/css/css-logical/logicalprops-with-deferred-writing-mode-expected.txt: Added.
        * web-platform-tests/css/css-logical/logicalprops-with-deferred-writing-mode.html: Added.

2022-03-19  Oriol Brufau  <obrufau@igalia.com>

        [cssom] Implement border-image serialization
        https://bugs.webkit.org/show_bug.cgi?id=238102

        Reviewed by Darin Adler.

        Let the test accept some equivalent serializations.
        Expect it to pass.

        * web-platform-tests/css/css-backgrounds/parsing/border-image-valid-expected.txt:
        * web-platform-tests/css/css-backgrounds/parsing/border-image-valid.html:

2022-03-19  Antoine Quint  <graouts@webkit.org>

        Dialog element only animates once
        https://bugs.webkit.org/show_bug.cgi?id=236274
        rdar://88857731

        Reviewed by Dean Jackson, Tim Nguyen and Antti Koivisto.

        Import relevant WPT tests that had already been upstreamed in a previous, reverted
        version of this patch.

        * web-platform-tests/css/css-animations/dialog-animation-expected.txt: Added.
        * web-platform-tests/css/css-animations/dialog-animation.html: Added.
        * web-platform-tests/css/css-animations/dialog-backdrop-animation-expected.txt: Added.
        * web-platform-tests/css/css-animations/dialog-backdrop-animation.html: Added.
        * web-platform-tests/css/css-animations/support/testcommon.js:
        (addElement):
        (addDiv):

2022-03-19  Antti Koivisto  <antti@apple.com>

        [CSS Container Queries] Add Typed OM support for container units
        https://bugs.webkit.org/show_bug.cgi?id=238078

        Reviewed by Alan Bujtas.

        * web-platform-tests/css/css-contain/container-queries/container-units-typed-om-expected.txt:

2022-03-18  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, reverting r291476.
        https://bugs.webkit.org/show_bug.cgi?id=238098

        Caused Gtk js/weakref-finalizationregistry.html failure

        Reverted changeset:

        "Remove the 1ms minimum for setTimeout"
        https://bugs.webkit.org/show_bug.cgi?id=221124
        https://commits.webkit.org/r291476

2022-03-18  Cameron McCormack  <heycam@apple.com>

        Update Display P3 canvas drawImage(video) tests to avoid edge case bugs
        https://bugs.webkit.org/show_bug.cgi?id=237286

        Reviewed by Jer Noble.

        This test is intermittently failing, due to the odd single frame
        videos causing issues and loadeddata not being guaranteed to mean the
        video is ready for drawing. Update the tests to work around these.

        * web-platform-tests/html/canvas/element/manual/wide-gamut-canvas/canvas-display-p3-drawImage-ImageBitmap-video.html:
        * web-platform-tests/html/canvas/element/manual/wide-gamut-canvas/canvas-display-p3-drawImage-video.html:
        Use requestVideoFrameCallback if available, since that should be
        better than loadeddata to guarantee the pixel data is available. Also
        play the videos that are inserted, to avoid issues with the video
        frame callback being called a bit late.

        * web-platform-tests/html/canvas/element/manual/wide-gamut-canvas/canvas-display-p3.js:
        Fix the command line in the comment that's used to generate the test
        videos.

        * web-platform-tests/html/canvas/element/manual/wide-gamut-canvas/resources/Rec2020-222000000.mp4:
        * web-platform-tests/html/canvas/element/manual/wide-gamut-canvas/resources/Rec2020-222000000.webm:
        * web-platform-tests/html/canvas/element/manual/wide-gamut-canvas/resources/Rec2020-3FF000000.mp4:
        * web-platform-tests/html/canvas/element/manual/wide-gamut-canvas/resources/Rec2020-3FF000000.webm:
        * web-platform-tests/html/canvas/element/manual/wide-gamut-canvas/resources/sRGB-BB0000.mp4:
        * web-platform-tests/html/canvas/element/manual/wide-gamut-canvas/resources/sRGB-BB0000.webm:
        * web-platform-tests/html/canvas/element/manual/wide-gamut-canvas/resources/sRGB-FF0100.mp4:
        * web-platform-tests/html/canvas/element/manual/wide-gamut-canvas/resources/sRGB-FF0100.webm:
        Change these videos from being a single frame long to 10s long.

2022-03-18  Antti Koivisto  <antti@apple.com>

        [CSS Container Queries] Ensure container style changes are propagated to descendants
        https://bugs.webkit.org/show_bug.cgi?id=238072

        Reviewed by Alan Bujtas.

        * web-platform-tests/css/css-contain/container-queries/container-name-invalidation-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-type-invalidation-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-units-selection-expected.txt:

2022-03-18  Antti Koivisto  <antti@apple.com>

        [CSS Container Queries] Basic support for container units
        https://bugs.webkit.org/show_bug.cgi?id=238021

        Reviewed by Antoine Quint.

        * web-platform-tests/css/css-contain/container-queries/container-units-animation-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-units-basic-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-units-computational-independence-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-units-invalidation-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-units-selection-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-units-small-viewport-fallback-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-units-typed-om-expected.txt:

2022-03-17  Matt Woodrow  <mattwoodrow@apple.com>

        Subgrid items should always be stretched.
        https://bugs.webkit.org/show_bug.cgi?id=237628

        Reviewed by Alan Bujtas.

        * web-platform-tests/css/css-grid/subgrid/subgrid-stretch-expected.html: Added.
        * web-platform-tests/css/css-grid/subgrid/subgrid-stretch.html: Added.

        Added new WPT test covering various width/height and alignement contraints that should be
        ignored since subgrids are always stretched.

2022-03-17  Antoine Quint  <graouts@webkit.org>

        REGRESSION (iOS 15.4 / r287669): Mobile app stopped working due to CSS / angular animation
        https://bugs.webkit.org/show_bug.cgi?id=237920
        <rdar://problem/90335275>

        Reviewed by Antti Koivisto.

        Add a test that looks at the default computed style for the "transition" and "animation"
        shorthands.

        * web-platform-tests/css/css-animations/parsing/animation-computed-expected.txt:
        * web-platform-tests/css/css-animations/parsing/animation-computed.html:
        * web-platform-tests/css/css-pseudo/first-letter-allowed-properties-expected.txt:
        * web-platform-tests/css/css-pseudo/first-line-allowed-properties-expected.txt:
        * web-platform-tests/css/css-transitions/parsing/transition-computed-expected.txt:
        * web-platform-tests/css/css-transitions/parsing/transition-computed.html:

2022-03-17  Ziran Sun  <zsun@igalia.com>

        [Selection] Fixes selection range settings for TEXTAREA
        https://bugs.webkit.org/show_bug.cgi?id=237641

        Reviewed by Chris Dumez.

        Updating test expectations as some sub-tests are now passing.
        * web-platform-tests/html/semantics/forms/textfieldselection/defaultSelection-expected.txt:
        * web-platform-tests/html/semantics/forms/textfieldselection/selection-start-end-expected.txt:
        * web-platform-tests/html/semantics/forms/textfieldselection/selection-start-end-extra-expected.txt:
        * web-platform-tests/html/semantics/forms/textfieldselection/selection-value-interactions-expected.txt:
        * web-platform-tests/html/semantics/forms/textfieldselection/textarea-selection-while-parsing-expected.txt:

2022-03-16  Rob Buis  <rbuis@igalia.com>

        Sync css/css-contain from WPT
        https://bugs.webkit.org/show_bug.cgi?id=237705

        Reviewed by Manuel Rego Casasnovas.

        Sync css/css-contain from WPT.

        * resources/resource-files.json:
        * web-platform-tests/css/css-contain/contain-layout-ink-overflow-013-expected.html:
        * web-platform-tests/css/css-contain/contain-layout-ink-overflow-013.html:
        * web-platform-tests/css/css-contain/contain-layout-ink-overflow-014.html:
        * web-platform-tests/css/css-contain/contain-layout-ink-overflow-017.html:
        * web-platform-tests/css/css-contain/content-visibility/content-visibility-044-expected.txt:
        * web-platform-tests/css/css-contain/content-visibility/content-visibility-044.html:
        * web-platform-tests/css/css-contain/content-visibility/resources/text-fragment-target-auto.html:
        * web-platform-tests/css/css-contain/content-visibility/w3c-import.log:
        * web-platform-tests/css/css-contain/w3c-import.log:

2022-03-16  Youenn Fablet  <youenn@apple.com>

        redirectCount returns 0 when using a Service Worker
        https://bugs.webkit.org/show_bug.cgi?id=235710
        <rdar://problem/88432190>

        Reviewed by Chris Dumez.

        * web-platform-tests/service-workers/service-worker/navigation-preload/resource-timing.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/redirected-response.https-expected.txt:

2022-03-15  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, reverting r291282.
        https://bugs.webkit.org/show_bug.cgi?id=237924

        Speedometer2 1-2% regression

        Reverted changeset:

        "Dialog element only animates once"
        https://bugs.webkit.org/show_bug.cgi?id=236274
        https://commits.webkit.org/r291282

2022-03-15  Patrick Griffis  <pgriffis@igalia.com>

        Add initial implementation of Fetch Metadata
        https://bugs.webkit.org/show_bug.cgi?id=204744

        Reviewed by Youenn Fablet.

        Update expectations for Fetch Metadata.

        * web-platform-tests/fetch/metadata/download.https.sub-expected.txt:
        * web-platform-tests/fetch/metadata/download.https.sub.html:
        * web-platform-tests/fetch/metadata/fetch-preflight.https.sub.any-expected.txt: Added.
        * web-platform-tests/fetch/metadata/fetch-preflight.https.sub.any.worker-expected.txt: Added.
        * web-platform-tests/fetch/metadata/fetch-via-serviceworker--fallback.https.sub-expected.txt:
        * web-platform-tests/fetch/metadata/fetch-via-serviceworker--respondWith.https.sub-expected.txt:
        * web-platform-tests/fetch/metadata/fetch.https.sub.any-expected.txt: Added.
        * web-platform-tests/fetch/metadata/fetch.https.sub.any.worker-expected.txt: Added.
        * web-platform-tests/fetch/metadata/fetch.sub-expected.txt:
        * web-platform-tests/fetch/metadata/font.https.sub-expected.txt:
        * web-platform-tests/fetch/metadata/img.https.sub-expected.txt:
        * web-platform-tests/fetch/metadata/redirect/cross-site-redirect.https.sub-expected.txt:
        * web-platform-tests/fetch/metadata/redirect/multiple-redirect-cross-site.https.sub-expected.txt:
        * web-platform-tests/fetch/metadata/script.https.sub-expected.txt:
        * web-platform-tests/fetch/metadata/script.sub-expected.txt:
        * web-platform-tests/fetch/metadata/serviceworker-accessors.https.sub-expected.txt: Added.
        * web-platform-tests/fetch/metadata/serviceworker.https.sub-expected.txt:
        * web-platform-tests/fetch/metadata/sharedworker.https.sub-expected.txt:
        * web-platform-tests/fetch/metadata/trailing-dot.https.sub.any-expected.txt: Added.
        * web-platform-tests/fetch/metadata/trailing-dot.https.sub.any.worker-expected.txt: Added.
        * web-platform-tests/fetch/metadata/unload.https.sub-expected.txt:
        * web-platform-tests/fetch/metadata/worker.https.sub-expected.txt:
        * web-platform-tests/fetch/metadata/xslt.https.sub-expected.txt:
        * web-platform-tests/service-workers/service-worker/update-module-request-mode.https-expected.txt:

2022-03-15  Antti Koivisto  <antti@apple.com>

        background-clip:text doesn't work with display:flex
        https://bugs.webkit.org/show_bug.cgi?id=169125
        <rdar://problem/72432683>

        Reviewed by Simon Fraser.

        * web-platform-tests/css/css-backgrounds/background-clip/clip-text-flex-expected.html: Added.
        * web-platform-tests/css/css-backgrounds/background-clip/clip-text-flex-ref.html: Added.
        * web-platform-tests/css/css-backgrounds/background-clip/clip-text-flex.html: Added.

2022-03-15  Joseph Griego  <jgriego@igalia.com>

        Expose some web APIs on Shadow Realms and Worklets
        https://bugs.webkit.org/show_bug.cgi?id=235736

        Reviewed by Yusuke Suzuki.

        Import the latest relevant idl definitions and new idlharness-shadowrealm tests

        * web-platform-tests/dom/idlharness-shadowrealm.window-expected.txt:
        * web-platform-tests/dom/idlharness.any.serviceworker-expected.txt:
        * web-platform-tests/dom/idlharness.any.sharedworker-expected.txt:
        * web-platform-tests/dom/idlharness.any.worker-expected.txt:
        * web-platform-tests/dom/idlharness.window-expected.txt:
        * web-platform-tests/encoding/idlharness-shadowrealm.window-expected.txt: Added.
        * web-platform-tests/encoding/idlharness-shadowrealm.window.html: Added.
        * web-platform-tests/encoding/idlharness-shadowrealm.window.js: Added.
        * web-platform-tests/hr-time/idlharness-shadowrealm.window-expected.txt: Added.
        * web-platform-tests/hr-time/idlharness-shadowrealm.window.html: Added.
        * web-platform-tests/hr-time/idlharness-shadowrealm.window.js: Added.
        * web-platform-tests/html/dom/idlharness-shadowrealm.window-expected.txt: Added.
        * web-platform-tests/html/dom/idlharness-shadowrealm.window.html: Added.
        * web-platform-tests/html/dom/idlharness-shadowrealm.window.js: Added.
        * web-platform-tests/interfaces/compression.idl:
        * web-platform-tests/interfaces/dom.idl:
        * web-platform-tests/interfaces/encoding.idl:
        * web-platform-tests/interfaces/hr-time.idl:
        * web-platform-tests/interfaces/html.idl:
        * web-platform-tests/interfaces/performance-timeline.idl:
        * web-platform-tests/interfaces/streams.idl:
        * web-platform-tests/interfaces/url.idl:
        * web-platform-tests/interfaces/user-timing.idl:
        * web-platform-tests/performance-timeline/idlharness-shadowrealm.window-expected.txt: Added.
        * web-platform-tests/performance-timeline/idlharness-shadowrealm.window.html: Added.
        * web-platform-tests/performance-timeline/idlharness-shadowrealm.window.js: Added.
        * web-platform-tests/resources/idlharness-shadowrealm.js:
        (promise_setup.):
        (idl_test_shadowrealm):
        (promise_setup): Deleted.
        * web-platform-tests/resources/idlharness.js:
        (IdlInterface.prototype.test_self):
        * web-platform-tests/streams/idlharness-shadowrealm.window-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/streams/idlharness.any-expected.txt.
        * web-platform-tests/streams/idlharness-shadowrealm.window.html: Added.
        * web-platform-tests/streams/idlharness-shadowrealm.window.js: Added.
        * web-platform-tests/streams/idlharness.any-expected.txt:
        * web-platform-tests/streams/idlharness.any.serviceworker-expected.txt:
        * web-platform-tests/streams/idlharness.any.worker-expected.txt:
        * web-platform-tests/url/idlharness-shadowrealm.window-expected.txt: Added.
        * web-platform-tests/url/idlharness-shadowrealm.window.html: Added.
        * web-platform-tests/url/idlharness-shadowrealm.window.js: Added.
        * web-platform-tests/user-timing/idlharness-shadowrealm.window-expected.txt: Added.
        * web-platform-tests/user-timing/idlharness-shadowrealm.window.html: Added.
        * web-platform-tests/user-timing/idlharness-shadowrealm.window.js: Added.

2022-03-15  Antti Koivisto  <antti@apple.com>

        [CSS Container Queries] Some more WPT updates
        https://bugs.webkit.org/show_bug.cgi?id=237890

        Reviewed by Antoine Quint.

        * web-platform-tests/css/css-contain/container-queries/canvas-as-container-005.html:
        * web-platform-tests/css/css-contain/container-queries/canvas-as-container-006.html:
        * web-platform-tests/css/css-contain/container-queries/chrome-legacy-skip-recalc.html:
        * web-platform-tests/css/css-contain/container-queries/container-computed-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-computed.html:
        * web-platform-tests/css/css-contain/container-queries/container-parsing-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-parsing.html:
        * web-platform-tests/css/css-contain/container-queries/container-type-parsing-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-type-parsing.html:
        * web-platform-tests/css/css-contain/container-queries/container-units-animation-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-units-animation.html:
        * web-platform-tests/css/css-contain/container-queries/container-units-basic.html:
        * web-platform-tests/css/css-contain/container-queries/container-units-computational-independence-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-units-computational-independence.html:
        * web-platform-tests/css/css-contain/container-queries/container-units-invalidation-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-units-invalidation.html:
        * web-platform-tests/css/css-contain/container-queries/container-units-selection.html:
        * web-platform-tests/css/css-contain/container-queries/container-units-small-viewport-fallback.html:
        * web-platform-tests/css/css-contain/container-queries/container-units-typed-om-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-units-typed-om.html:
        * web-platform-tests/css/css-contain/container-queries/display-none-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/display-none.html:
        * web-platform-tests/css/css-contain/container-queries/fragmented-container-001.html:
        * web-platform-tests/css/css-contain/container-queries/multicol-container-001.html:
        * web-platform-tests/css/css-contain/container-queries/sibling-layout-dependency-expected.txt: Added.
        * web-platform-tests/css/css-contain/container-queries/sibling-layout-dependency.html: Added.
        * web-platform-tests/css/css-contain/container-queries/svg-foreignobject-no-size-container.html:
        * web-platform-tests/css/css-contain/container-queries/svg-root-size-container.html:
        * web-platform-tests/css/css-contain/container-queries/table-inside-container-changing-display.html:
        * web-platform-tests/css/css-contain/container-queries/w3c-import.log:
        * web-platform-tests/css/css-contain/container-queries/whitespace-update-after-removal.html:

2022-03-15  Antti Koivisto  <antti@apple.com>

        CSSConditionRule.conditionText should be readonly
        https://bugs.webkit.org/show_bug.cgi?id=237880

        Reviewed by Antoine Quint.

        * web-platform-tests/interfaces/css-conditional.idl:

2022-03-15  Antoine Quint  <graouts@webkit.org>

        Dialog element only animates once
        https://bugs.webkit.org/show_bug.cgi?id=236274

        Reviewed by Dean Jackson, Tim Nguyen and Antti Koivisto.

        Import relevant WPT tests that had already been upstreamed in a previous, reverted
        version of this patch.

        * web-platform-tests/css/css-animations/dialog-animation-expected.txt: Added.
        * web-platform-tests/css/css-animations/dialog-animation.html: Added.
        * web-platform-tests/css/css-animations/dialog-backdrop-animation-expected.txt: Added.
        * web-platform-tests/css/css-animations/dialog-backdrop-animation.html: Added.
        * web-platform-tests/css/css-animations/support/testcommon.js:
        (addElement):
        (addDiv):

2022-03-14  Oriol Brufau  <obrufau@igalia.com>

        [css-cascade] Fix 'revert' on low-priority properties
        https://bugs.webkit.org/show_bug.cgi?id=236272

        Reviewed by Darin Adler.

        Add one test and expect an existing one to pass.

        * web-platform-tests/css/css-cascade/all-prop-revert-layer-noop-expected.txt:
        * web-platform-tests/css/css-cascade/all-prop-revert-noop-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/css/css-cascade/all-prop-revert-layer-noop-expected.txt.
        * web-platform-tests/css/css-cascade/all-prop-revert-noop.html: Added.

2022-03-14  Antoine Quint  <graouts@webkit.org>

        [web-animations] marker-start should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237826

        Reviewed by Antti Koivisto.

        Test failures are due to SVGURIReference::fragmentIdentifierFromIRIString() rejecting the values used in the
        test which do not contain a "#". While this is not the greatest test values for this property, this is indeed
        a bug that we reject the value during parsing instead of storing it.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-14  Antoine Quint  <graouts@webkit.org>

        [web-animations] marker-mid should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237825

        Reviewed by Antti Koivisto.

        Test failures are due to SVGURIReference::fragmentIdentifierFromIRIString() rejecting the values used in the
        test which do not contain a "#". While this is not the greatest test values for this property, this is indeed
        a bug that we reject the value during parsing instead of storing it.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-14  Antoine Quint  <graouts@webkit.org>

        [web-animations] marker-end should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237824

        Reviewed by Antti Koivisto.

        Test failures are due to SVGURIReference::fragmentIdentifierFromIRIString() rejecting the values used in the
        test which do not contain a "#". While this is not the greatest test values for this property, this is indeed
        a bug that we reject the value during parsing instead of storing it.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-11  Antoine Quint  <graouts@webkit.org>

        [web-animations] shape-rendering should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237767

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-11  Antoine Quint  <graouts@webkit.org>

        [web-animations] vector-effect should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237766

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-11  Antoine Quint  <graouts@webkit.org>

        [web-animations] text-anchor should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237765

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-11  Antoine Quint  <graouts@webkit.org>

        [web-animations] stroke-linejoin should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237764

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-11  Antoine Quint  <graouts@webkit.org>

        [web-animations] stroke-linecap should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237763

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-11  Antoine Quint  <graouts@webkit.org>

        [web-animations] mask-repeat should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237771

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-11  Antoine Quint  <graouts@webkit.org>

        [web-animations] mask-mode should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237770

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-11  Antoine Quint  <graouts@webkit.org>

        [web-animations] mask-composite should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237769

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-11  Antoine Quint  <graouts@webkit.org>

        [web-animations] mask-type should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237768

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-11  Antoine Quint  <graouts@webkit.org>

        [web-animations] text-rendering should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237777

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-11  Antti Koivisto  <antti@apple.com>

        [CSS Container Queries] Only apply inline-size containment when it is allowed
        https://bugs.webkit.org/show_bug.cgi?id=237761

        Reviewed by Antoine Quint.

        * web-platform-tests/css/css-contain/container-queries/ineligible-containment-expected.txt:

2022-03-10  Antoine Quint  <graouts@webkit.org>

        [web-animations] mask-origin should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237733

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-10  Antoine Quint  <graouts@webkit.org>

        [web-animations] font-variant-numeric should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237669

        Reviewed by Antti Koivisto.

        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-10  Antoine Quint  <graouts@webkit.org>

        [web-animations] mask-clip should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237725

        Reviewed by Simon Fraser.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-10  Antoine Quint  <graouts@webkit.org>

        [web-animations] scroll-behavior should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237723

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-10  Antoine Quint  <graouts@webkit.org>

        [web-animations] quotes should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237721

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-10  Chris Fleizach  <cfleizach@apple.com>

        AX: Support updated WebSpeech API
        https://bugs.webkit.org/show_bug.cgi?id=237614
        <rdar://problem/89981851>

        Reviewed by Andres Gonzalez.

        * web-platform-tests/speech-api/SpeechSynthesisErrorEvent-constructor-expected.txt:
        * web-platform-tests/speech-api/SpeechSynthesisEvent-constructor-expected.txt:
        * web-platform-tests/speech-api/idlharness.window-expected.txt:

2022-03-10  Antoine Quint  <graouts@webkit.org>

        [web-animations] grid-template-areas should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237712

        Reviewed by Antti Koivisto.

        While we now run the grid-template-areas tests, we have a bug in the way we serialize the value through the
        computed style.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-10  Antoine Quint  <graouts@webkit.org>

        [web-animations] font-variant-caps should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237662

        Reviewed by Myles C. Maxfield.

        * web-platform-tests/css/css-fonts/animations/system-fonts-expected.txt:
        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-10  Antoine Quint  <graouts@webkit.org>

        [web-animations] font-variant-position should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237671

        Reviewed by Myles C. Maxfield.

        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-10  Antoine Quint  <graouts@webkit.org>

        [web-animations] font-variant-ligatures should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237667

        Reviewed by Myles C. Maxfield.

        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-10  Antoine Quint  <graouts@webkit.org>

        [web-animations] font-variant-east-asian should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237665

        Reviewed by Myles C. Maxfield.

        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-10  Lauro Moura  <lmoura@igalia.com>

        Add context.roundRect support to OffScreenCanvas
        https://bugs.webkit.org/show_bug.cgi?id=232780
        <rdar://problem/85366210>

        Reviewed by Darin Adler.

        Updated baselines with PASS.

        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.1.radius.dompoint-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.1.radius.dompointinit-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.1.radius.dompointinit.single.argument-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.1.radius.double-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.1.radius.double.single.argument-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.2.radii.1.dompoint-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.2.radii.1.dompointinit-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.2.radii.1.double-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.2.radii.2.dompoint-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.2.radii.2.dompointinit-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.2.radii.2.double-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.3.radii.1.dompoint-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.3.radii.1.dompointinit-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.3.radii.1.double-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.3.radii.2.dompoint-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.3.radii.2.dompointinit-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.3.radii.2.double-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.3.radii.3.dompoint-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.3.radii.3.dompointinit-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.3.radii.3.double-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.1.dompoint-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.1.dompointinit-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.1.double-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.2.dompoint-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.2.dompointinit-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.2.double-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.3.dompoint-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.3.dompointinit-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.3.double-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.4.dompoint-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.4.dompointinit-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.4.double-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.closed-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.end.1-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.end.2-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.end.3-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.end.4-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.negative-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.newsubpath-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.nonfinite-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.radius.intersecting.1-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.radius.intersecting.2-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.radius.negative-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.radius.none-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.radius.toomany-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.selfintersect-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.winding-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.zero.1-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.zero.2-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.zero.3-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.zero.4-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.zero.5-expected.txt:
        * web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.zero.6-expected.txt:
        * web-platform-tests/html/canvas/offscreen/drawing-images-to-the-canvas/2d.drawImage.zerosource.image-expected.txt:
        * web-platform-tests/html/canvas/offscreen/drawing-images-to-the-canvas/2d.drawImage.zerosource.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.1.radius.dompoint-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.1.radius.dompoint.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.1.radius.dompointinit-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.1.radius.dompointinit.worker-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.1.radius.double-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.1.radius.double.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.2.radii.1.dompoint-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.2.radii.1.dompoint.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.2.radii.1.dompointinit-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.2.radii.1.dompointinit.worker-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.2.radii.1.double-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.2.radii.1.double.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.2.radii.2.dompoint-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.2.radii.2.dompoint.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.2.radii.2.dompointinit-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.2.radii.2.dompointinit.worker-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.2.radii.2.double-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.2.radii.2.double.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.1.dompoint-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.1.dompoint.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.1.dompointinit-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.3.radii.1.dompointinit-expected.txt.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.1.dompointinit.worker-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.1.double-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.1.double.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.2.dompoint-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.2.dompoint.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.2.dompointinit-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.2.dompointinit.worker-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.2.double-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.2.double.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.3.dompoint-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.3.dompoint.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.3.dompointinit-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.3.radii.3.dompointinit-expected.txt.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.3.dompointinit.worker-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.3.double-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.3.radii.3.double.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.1.dompoint-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.1.dompoint.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.1.dompointinit-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.1.dompointinit-expected.txt.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.1.dompointinit.worker-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.1.double-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.1.double.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.2.dompoint-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.2.dompoint.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.2.dompointinit-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.2.dompointinit-expected.txt.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.2.dompointinit.worker-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.2.double-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.2.double.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.3.dompoint-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.3.dompoint.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.3.dompointinit-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.3.dompointinit-expected.txt.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.3.dompointinit.worker-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.3.double-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.3.double.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.4.dompoint-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.4.dompoint.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.4.dompointinit-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/html/canvas/element/path-objects/2d.path.roundrect.4.radii.4.dompointinit-expected.txt.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.4.dompointinit.worker-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.4.double-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.4.radii.4.double.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.closed-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.closed.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.end.1-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.end.1.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.end.2-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.end.2.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.end.3-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.end.3.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.end.4-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.end.4.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.negative-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.negative.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.newsubpath-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.newsubpath.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.nonfinite-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.nonfinite.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.radius.intersecting.1-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.radius.intersecting.1.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.radius.intersecting.2-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.radius.intersecting.2.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.radius.negative-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.radius.negative.worker-expected.txt: Added.
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.radius.none-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.radius.none.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.radius.toomany-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.radius.toomany.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.selfintersect-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.selfintersect.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.winding-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.winding.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.zero.1-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.zero.1.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.zero.2-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.zero.2.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.zero.3-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.zero.3.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.zero.4-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.zero.4.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.zero.5-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.zero.5.worker-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.zero.6-expected.txt:
        * web-platform-tests/html/canvas/offscreen/path-objects/2d.path.roundrect.zero.6.worker-expected.txt:
        * web-platform-tests/html/dom/idlharness.https-expected.txt:
        * web-platform-tests/html/dom/idlharness.worker-expected.txt:

2022-03-10  Nikolas Zimmermann  <nzimmermann@igalia.com>

        Cleanup RenderLayer::currentTransform()
        https://bugs.webkit.org/show_bug.cgi?id=237553

        Reviewed by Rob Buis.

        Add two new WPT tests covering animations of the 'transform-box' property.

        * web-platform-tests/css/css-transforms/animation/transform-box-expected.html: Added.
        * web-platform-tests/css/css-transforms/animation/transform-box-will-change-transform-layer-expected.html: Added.
        * web-platform-tests/css/css-transforms/animation/transform-box-will-change-transform-layer.html: Added.
        * web-platform-tests/css/css-transforms/animation/transform-box.html: Added.

2022-03-09  Antoine Quint  <graouts@webkit.org>

        [web-animations] font-variant-alternates should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237661

        Reviewed by Myles C. Maxfield.

        While we now run the font-variant-alternates tests, we don't support all values for this property so we fail
        those tests.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-10  Antoine Quint  <graouts@webkit.org>

        [web-animations] font-synthesis should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237650

        Reviewed by Myles C. Maxfield.

        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-09  Antoine Quint  <graouts@webkit.org>

        [web-animations] fill-rule should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237648

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-10  Antoine Quint  <graouts@webkit.org>

        [web-animations] counter-reset should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237644

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-10  Antti Koivisto  <antti@apple.com>

        [CSS Container Queries] Implement new container selection algorithm
        https://bugs.webkit.org/show_bug.cgi?id=237657

        Reviewed by Antoine Quint.

        * web-platform-tests/css/css-contain/container-queries/container-selection-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/unsupported-axis-expected.txt:

2022-03-09  Youenn Fablet  <youenn@apple.com>

        imported/w3c/web-platform-tests/webrtc-extensions/transfer-datachannel.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=237327

        Reviewed by Eric Carlson.

        The worker is first sending the Opened message, than any message coming from the data channel.
        Wait for the Opened message before proceeding with the rest of the test.

        * web-platform-tests/webrtc-extensions/transfer-datachannel.html:

2022-03-09  Antoine Quint  <graouts@webkit.org>

        [web-animations] counter-increment should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237640

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-09  Antoine Quint  <graouts@webkit.org>

        [web-animations] dominant-baseline should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237645

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-09  Antoine Quint  <graouts@webkit.org>

        [css-lists] css/css-lists/inherit-overwrites.html and css/css-lists/li-counter-increment-computed-style.html are unique failures
        https://bugs.webkit.org/show_bug.cgi?id=237642

        Reviewed by Antti Koivisto.

        * web-platform-tests/css/css-lists/inherit-overwrites-expected.txt:
        * web-platform-tests/css/css-lists/li-counter-increment-computed-style-expected.txt:
        * web-platform-tests/html/rendering/non-replaced-elements/lists/lists-styles-expected.txt:

2022-03-09  Antti Koivisto  <antti@apple.com>

        [CSS Container Queries] Remove size() function syntax
        https://bugs.webkit.org/show_bug.cgi?id=237639

        Reviewed by Antoine Quint.

        * web-platform-tests/css/css-contain/container-queries/at-container-parsing-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-name-parsing-expected.txt:

2022-03-09  Antoine Quint  <graouts@webkit.org>

        [web-animations] color-interpolation-filters should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237637

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-08  Antoine Quint  <graouts@webkit.org>

        [web-animations] clip-rule should support discrete animations
        https://bugs.webkit.org/show_bug.cgi?id=237609

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-08  Antoine Quint  <graouts@webkit.org>

        [web-animations] background-blend-mode should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237607

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-08  Antoine Quint  <graouts@webkit.org>

        [web-animations] font-family should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237591

        Reviewed by Myles Maxfield.

        * web-platform-tests/css/css-fonts/animations/system-fonts-expected.txt:
        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-08  Antoine Quint  <graouts@webkit.org>

        [web-animations] font-feature-settings should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237587

        Reviewed by Antti Koivisto.

        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-08  Antoine Quint  <graouts@webkit.org>

        [web-animations] font-kerning should supporting discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237585

        Reviewed by Antti Koivisto.

        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-expected.txt:
        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:

2022-03-09  Antti Koivisto  <antti@apple.com>

        [CSS Container Queries] Import updated WPTs
        https://bugs.webkit.org/show_bug.cgi?id=237638

        Reviewed by Antoine Quint.

        Upstream has been updated with the new syntax from

        https://github.com/w3c/csswg-drafts/issues/6870

        and behavior from

        https://github.com/w3c/csswg-drafts/issues/6644

        * resources/resource-files.json:
        * web-platform-tests/css/css-contain/container-queries/animation-container-size.html:
        * web-platform-tests/css/css-contain/container-queries/animation-container-type-dynamic.html:
        * web-platform-tests/css/css-contain/container-queries/animation-nested-animation.html:
        * web-platform-tests/css/css-contain/container-queries/animation-nested-transition.html:
        * web-platform-tests/css/css-contain/container-queries/aspect-ratio-feature-evaluation.html:
        * web-platform-tests/css/css-contain/container-queries/at-container-parsing-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/at-container-parsing.html:
        * web-platform-tests/css/css-contain/container-queries/auto-scrollbars.html:
        * web-platform-tests/css/css-contain/container-queries/backdrop-invalidation.html:
        * web-platform-tests/css/css-contain/container-queries/canvas-as-container-005-expected.txt: Added.
        * web-platform-tests/css/css-contain/container-queries/canvas-as-container-005.html: Added.
        * web-platform-tests/css/css-contain/container-queries/canvas-as-container-006-expected.txt: Added.
        * web-platform-tests/css/css-contain/container-queries/canvas-as-container-006.html: Added.
        * web-platform-tests/css/css-contain/container-queries/change-display-in-container.html:
        * web-platform-tests/css/css-contain/container-queries/conditional-container-status.html:
        * web-platform-tests/css/css-contain/container-queries/container-computed-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-computed.html:
        * web-platform-tests/css/css-contain/container-queries/container-for-shadow-dom-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-contain/container-queries/container-for-shadow-dom.tentative-expected.txt.
        * web-platform-tests/css/css-contain/container-queries/container-for-shadow-dom.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-contain/container-queries/container-for-shadow-dom.tentative.html.
        * web-platform-tests/css/css-contain/container-queries/container-inner-at-rules-expected.txt: Added.
        * web-platform-tests/css/css-contain/container-queries/container-inner-at-rules.html: Added.
        * web-platform-tests/css/css-contain/container-queries/container-name-computed-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-name-computed.html:
        * web-platform-tests/css/css-contain/container-queries/container-name-invalidation.html:
        * web-platform-tests/css/css-contain/container-queries/container-name-parsing-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-name-parsing.html:
        * web-platform-tests/css/css-contain/container-queries/container-nested-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-nested.html:
        * web-platform-tests/css/css-contain/container-queries/container-parsing-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-parsing.html:
        * web-platform-tests/css/css-contain/container-queries/container-selection-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/container-selection.html:
        * web-platform-tests/css/css-contain/container-queries/container-size-invalidation.html:
        * web-platform-tests/css/css-contain/container-queries/container-type-invalidation.html:
        * web-platform-tests/css/css-contain/container-queries/container-units-small-viewport-fallback-expected.txt: Added.
        * web-platform-tests/css/css-contain/container-queries/container-units-small-viewport-fallback.html: Added.
        * web-platform-tests/css/css-contain/container-queries/counters-flex-circular.html:
        * web-platform-tests/css/css-contain/container-queries/counters-in-container-dynamic.html:
        * web-platform-tests/css/css-contain/container-queries/counters-in-container.html:
        * web-platform-tests/css/css-contain/container-queries/deep-nested-inline-size-containers-expected.txt: Added.
        * web-platform-tests/css/css-contain/container-queries/deep-nested-inline-size-containers.html: Added.
        * web-platform-tests/css/css-contain/container-queries/display-contents.html:
        * web-platform-tests/css/css-contain/container-queries/display-in-container.html:
        * web-platform-tests/css/css-contain/container-queries/display-none.html:
        * web-platform-tests/css/css-contain/container-queries/fieldset-legend-change.html:
        * web-platform-tests/css/css-contain/container-queries/flex-in-columns-000-crash.html:
        * web-platform-tests/css/css-contain/container-queries/flex-in-columns-001-crash.html:
        * web-platform-tests/css/css-contain/container-queries/flex-in-columns-002-crash.html:
        * web-platform-tests/css/css-contain/container-queries/flex-in-columns-003-crash.html:
        * web-platform-tests/css/css-contain/container-queries/focus-inside-content-visibility-crash.html:
        * web-platform-tests/css/css-contain/container-queries/font-relative-units-dynamic.html:
        * web-platform-tests/css/css-contain/container-queries/font-relative-units.html:
        * web-platform-tests/css/css-contain/container-queries/fragmented-container-001-expected.txt: Added.
        * web-platform-tests/css/css-contain/container-queries/fragmented-container-001.html: Added.
        * web-platform-tests/css/css-contain/container-queries/get-animations.html:
        * web-platform-tests/css/css-contain/container-queries/grid-in-columns-000-crash.html:
        * web-platform-tests/css/css-contain/container-queries/grid-in-columns-001-crash.html:
        * web-platform-tests/css/css-contain/container-queries/grid-in-columns-002-crash.html:
        * web-platform-tests/css/css-contain/container-queries/grid-in-columns-003-crash.html:
        * web-platform-tests/css/css-contain/container-queries/iframe-invalidation.html:
        * web-platform-tests/css/css-contain/container-queries/ineligible-containment.html:
        * web-platform-tests/css/css-contain/container-queries/inline-multicol-inside-container-crash.html:
        * web-platform-tests/css/css-contain/container-queries/inline-size-and-min-width.html:
        * web-platform-tests/css/css-contain/container-queries/inline-size-bfc-floats.html:
        * web-platform-tests/css/css-contain/container-queries/inline-size-containment-vertical-rl.html:
        * web-platform-tests/css/css-contain/container-queries/inline-size-containment.html:
        * web-platform-tests/css/css-contain/container-queries/inline-with-columns-000-crash.html:
        * web-platform-tests/css/css-contain/container-queries/inline-with-columns-001-crash.html:
        * web-platform-tests/css/css-contain/container-queries/multicol-container-001-expected.txt: Added.
        * web-platform-tests/css/css-contain/container-queries/multicol-container-001.html: Added.
        * web-platform-tests/css/css-contain/container-queries/multicol-inside-container.html:
        * web-platform-tests/css/css-contain/container-queries/never-match-container-expected.txt: Added.
        * web-platform-tests/css/css-contain/container-queries/never-match-container.html: Added.
        * web-platform-tests/css/css-contain/container-queries/orthogonal-wm-container-query.html:
        * web-platform-tests/css/css-contain/container-queries/percentage-padding-orthogonal.html:
        * web-platform-tests/css/css-contain/container-queries/pseudo-elements-001.html:
        * web-platform-tests/css/css-contain/container-queries/pseudo-elements-002.tentative-expected.html: Removed.
        * web-platform-tests/css/css-contain/container-queries/pseudo-elements-002.tentative-ref.html: Removed.
        * web-platform-tests/css/css-contain/container-queries/pseudo-elements-002.tentative.html: Removed.
        * web-platform-tests/css/css-contain/container-queries/pseudo-elements-003-expected.txt: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-contain/container-queries/pseudo-elements-003.tentative-expected.txt.
        * web-platform-tests/css/css-contain/container-queries/pseudo-elements-003.html: Renamed from LayoutTests/imported/w3c/web-platform-tests/css/css-contain/container-queries/pseudo-elements-003.tentative.html.
        * web-platform-tests/css/css-contain/container-queries/query-content-box.html:
        * web-platform-tests/css/css-contain/container-queries/query-evaluation-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/query-evaluation.html:
        * web-platform-tests/css/css-contain/container-queries/reattach-container-with-dirty-child.html:
        * web-platform-tests/css/css-contain/container-queries/resize-while-content-visibility-hidden.html:
        * web-platform-tests/css/css-contain/container-queries/size-container-no-principal-box.html:
        * web-platform-tests/css/css-contain/container-queries/size-feature-evaluation-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/size-feature-evaluation.html:
        * web-platform-tests/css/css-contain/container-queries/style-change-in-container.html:
        * web-platform-tests/css/css-contain/container-queries/svg-layout-root-crash.html:
        * web-platform-tests/css/css-contain/container-queries/svg-root-size-container-expected.txt: Added.
        * web-platform-tests/css/css-contain/container-queries/svg-root-size-container.html: Added.
        * web-platform-tests/css/css-contain/container-queries/table-in-columns-000-crash.html:
        * web-platform-tests/css/css-contain/container-queries/table-in-columns-001-crash.html:
        * web-platform-tests/css/css-contain/container-queries/table-in-columns-002-crash.html:
        * web-platform-tests/css/css-contain/container-queries/table-in-columns-003-crash.html:
        * web-platform-tests/css/css-contain/container-queries/top-layer-dialog-backdrop.html:
        * web-platform-tests/css/css-contain/container-queries/top-layer-dialog-container.html:
        * web-platform-tests/css/css-contain/container-queries/top-layer-dialog.html:
        * web-platform-tests/css/css-contain/container-queries/top-layer-nested-dialog.html:
        * web-platform-tests/css/css-contain/container-queries/transition-scrollbars.html:
        * web-platform-tests/css/css-contain/container-queries/transition-style-change-event.html:
        * web-platform-tests/css/css-contain/container-queries/unsupported-axis-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/unsupported-axis.html:
        * web-platform-tests/css/css-contain/container-queries/viewport-units-dynamic.html:
        * web-platform-tests/css/css-contain/container-queries/viewport-units.html:
        * web-platform-tests/css/css-contain/container-queries/w3c-import.log:
        * web-platform-tests/css/css-contain/container-queries/whitespace-update-after-removal.html:

2022-03-08  Antoine Quint  <graouts@webkit.org>

        [web-animations] color-interpolation should support discrete animation
        https://bugs.webkit.org/show_bug.cgi?id=237610

        Reviewed by Tim Nguyen.

        Since the input for the strings used in comparison for the WPT tests is using toLowerCase(),
        we need to also use toLowerCase() for the output, so that "linearRGB" and "linearrgb" are
        both correct values for "color-interpolation" values.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/property-list.js:

2022-03-08  Sihui Liu  <sihui_liu@apple.com>

        File System Access: disallow empty name in FileSystemHandle
        https://bugs.webkit.org/show_bug.cgi?id=237563

        Reviewed by Youenn Fablet.

        * web-platform-tests/file-system-access/sandboxed_FileSystemDirectoryHandle-getDirectoryHandle.https.any-expected.txt:
        * web-platform-tests/file-system-access/sandboxed_FileSystemDirectoryHandle-getDirectoryHandle.https.any.worker-expected.txt:
        * web-platform-tests/file-system-access/sandboxed_FileSystemDirectoryHandle-removeEntry.https.any-expected.txt:
        * web-platform-tests/file-system-access/sandboxed_FileSystemDirectoryHandle-removeEntry.https.any.worker-expected.txt:

2022-03-08  Alex Christensen  <achristensen@webkit.org>

        WebSocket.send() should synchronously update bufferedAmount
        https://bugs.webkit.org/show_bug.cgi?id=235707

        Reviewed by Chris Dumez.

        * web-platform-tests/websockets/Send-binary-65K-arraybuffer.any.worker-expected.txt:
        * web-platform-tests/websockets/Send-binary-arraybuffer.any.worker-expected.txt:
        * web-platform-tests/websockets/Send-data.any.worker-expected.txt:
        * web-platform-tests/websockets/Send-paired-surrogates.any.worker-expected.txt:
        * web-platform-tests/websockets/Send-unicode-data.any.worker-expected.txt:
        * web-platform-tests/websockets/bufferedAmount-unchanged-by-sync-xhr.any.worker-expected.txt:
        * web-platform-tests/websockets/interfaces/WebSocket/close/close-basic-expected.txt:
        * web-platform-tests/websockets/interfaces/WebSocket/close/close-connecting-expected.txt:

2022-03-08  Chris Dumez  <cdumez@apple.com>

        Resync web-platform-tests/beacon from upstream
        https://bugs.webkit.org/show_bug.cgi?id=237536

        Unreviewed, drop web-platform-tests/beacon tests that are no longer upstream (as of 30d5f8f4c7687a4f2c0).

        * web-platform-tests/beacon/beacon-basic-blob-expected.txt: Removed.
        * web-platform-tests/beacon/beacon-navigate-expected.txt: Removed.
        * web-platform-tests/beacon/beacon-redirect.sub.window-expected.txt: Removed.
        * web-platform-tests/beacon/beacon-redirect.sub.window.html: Removed.
        * web-platform-tests/beacon/resources/beacon-preflight.py: Removed.
        (respondToCORSPreflight): Deleted.
        (main): Deleted.
        * web-platform-tests/beacon/resources/redirect.py: Removed.
        (main): Deleted.
        * web-platform-tests/beacon/resources/upgrade-iframe.html: Removed.
        * web-platform-tests/beacon/upgrade-beacon.https-expected.txt: Removed.
        * web-platform-tests/beacon/upgrade-beacon.https.html: Removed.

2022-03-07  Chris Dumez  <cdumez@apple.com>

        Make "true" count as truthy in window.open()'s boolean features
        https://bugs.webkit.org/show_bug.cgi?id=237530

        Reviewed by Alex Christensen.

        Import WPT test coverage.

        * resources/resource-files.json:
        * web-platform-tests/html/browsers/the-window-object/apis-for-creating-and-navigating-browsing-contexts-by-name/open-features-is-popup-condition.html:
        * web-platform-tests/html/browsers/the-window-object/support/w3c-import.log:
        * web-platform-tests/html/browsers/the-window-object/support/windowFeature-values-target.html: Added.
        * web-platform-tests/html/browsers/the-window-object/w3c-import.log:
        * web-platform-tests/html/browsers/the-window-object/window-open-noopener.html:
        * web-platform-tests/html/browsers/the-window-object/window-open-windowfeatures-values-expected.txt: Added.
        * web-platform-tests/html/browsers/the-window-object/window-open-windowfeatures-values.html: Added.

2022-03-07  Antoine Quint  <graouts@webkit.org>

        [web-animations] animating "fill" and "stroke" to or from "currentColor" should work
        https://bugs.webkit.org/show_bug.cgi?id=237531

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/responsive/to-color-change-expected.txt:

2022-03-07  Antoine Quint  <graouts@webkit.org>

        Transition on text-decoration-color from currentColor jumps
        https://bugs.webkit.org/show_bug.cgi?id=236992
        <rdar://problem/89382835>

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/responsive/to-color-change-expected.txt:

2022-03-07  Antoine Quint  <graouts@webkit.org>

        [web-animations] text-emphasis shorthand should be animatable
        https://bugs.webkit.org/show_bug.cgi?id=237529

        Reviewed by Antti Koivisto.

        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-expected.txt:
        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:

2022-03-07  Antoine Quint  <graouts@webkit.org>

        [web-animations] text-emphasis-style should support discrete animations
        https://bugs.webkit.org/show_bug.cgi?id=237514

        Reviewed by Antti Koivisto.

        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-expected.txt:
        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:
        * web-platform-tests/css/css-text-decor/inheritance-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-07  Antoine Quint  <graouts@webkit.org>

        [web-animations] text-emphasis-color should support non-discrete animations
        https://bugs.webkit.org/show_bug.cgi?id=237518

        Reviewed by Antti Koivisto.

        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-002-expected.txt:

2022-03-07  Antoine Quint  <graouts@webkit.org>

        [web-animations] text-decoration-skip-ink should support discrete animations
        https://bugs.webkit.org/show_bug.cgi?id=237512

        Reviewed by Antti Koivisto.

        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:

2022-03-07  Antoine Quint  <graouts@webkit.org>

        [web-animations] line-break should support discrete animations
        https://bugs.webkit.org/show_bug.cgi?id=237520

        Reviewed by Antti Koivisto.

        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:

2022-03-07  Antoine Quint  <graouts@webkit.org>

        Parsing of list-style shorthand is incorrect
        https://bugs.webkit.org/show_bug.cgi?id=237515

        Reviewed by Antti Koivisto.

        * web-platform-tests/css/css-lists/parsing/list-style-computed.sub-expected.txt:
        * web-platform-tests/css/css-lists/parsing/list-style-valid-expected.txt:
        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-expected.txt:
        * web-platform-tests/css/css-pseudo/parsing/marker-supported-properties-in-animation-expected.txt:
        * web-platform-tests/css/cssom/shorthand-values-expected.txt:

2022-03-07  Matt Woodrow  <mattwoodrow@apple.com>

        Compute correct containing block override size for items that are subgridden in one dimension only.
        https://bugs.webkit.org/show_bug.cgi?id=236951

        Reviewed by Dean Jackson.

        Added new WPT similar to auto-track-sizing-001 which adds new variations
        with nested subgrids and varying whether the other axis is subgridded.

        * web-platform-tests/css/css-grid/subgrid/auto-track-sizing-002-expected.html: Added.
        * web-platform-tests/css/css-grid/subgrid/auto-track-sizing-002.html: Added.

2022-03-05  Oriol Brufau  <obrufau@igalia.com>

        [css-cascade] Let 'revert-layer' in lowest layer roll back to user styles
        https://bugs.webkit.org/show_bug.cgi?id=237486

        Reviewed by Antti Koivisto.

        Add test. It still has some remaining failures due to bug 236272.

        * web-platform-tests/css/css-cascade/all-prop-revert-layer-noop-expected.txt: Added.
        * web-platform-tests/css/css-cascade/all-prop-revert-layer-noop.html: Added.

2022-03-04  Chris Dumez  <cdumez@apple.com>

        Home link on weather.gov is not working
        https://bugs.webkit.org/show_bug.cgi?id=237451
        <rdar://60409277>

        Reviewed by Geoff Garen.

        * web-platform-tests/html/browsers/browsing-the-web/overlapping-navigations-and-traversals/tentative/anchor-fragment-history-back-on-click-expected.txt: Added.
        * web-platform-tests/html/browsers/browsing-the-web/overlapping-navigations-and-traversals/tentative/anchor-fragment-history-back-on-click.html: Added.
        Add layout test coverage (already upstreamed to WPT).

        * web-platform-tests/html/browsers/browsing-the-web/overlapping-navigations-and-traversals/tentative/cross-document-traversal-same-document-nav-expected.txt:
        * web-platform-tests/html/browsers/browsing-the-web/overlapping-navigations-and-traversals/tentative/same-document-traversal-same-document-nav-expected.txt:
        Rebaseline a couple of WPT tests that are now failing. I have verified that these tests are fully failing (and in the same way) in Blink.
        In Gecko, only the second subtest in each of these tests is failing.

2022-03-04  Chris Dumez  <cdumez@apple.com>

        Load event never firing after form is submitted
        https://bugs.webkit.org/show_bug.cgi?id=235407
        <rdar://problem/87831049>

        Reviewed by Geoffrey Garen.

        Rebaseline WPT tests that are no longer timing out.

        * web-platform-tests/html/semantics/forms/form-submission-target/rel-base-target-expected.txt:
        * web-platform-tests/html/semantics/forms/form-submission-target/rel-button-target-expected.txt:
        * web-platform-tests/html/semantics/forms/form-submission-target/rel-form-target-expected.txt:
        * web-platform-tests/html/semantics/forms/form-submission-target/rel-input-target-expected.txt:

2022-03-04  Antoine Quint  <graouts@webkit.org>

        [web-animations] "inherit" values should trigger keyframe recomputation if any previous effect has changed that property
        https://bugs.webkit.org/show_bug.cgi?id=237471

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/responsive/textIndent-expected.txt:

2022-03-02  Antoine Quint  <graouts@webkit.org>

        [web-animations] keyframe values set to "inherit" should recompute their values when the inherited value changes
        https://bugs.webkit.org/show_bug.cgi?id=237371

        Reviewed by Antti Koivisto.

        * web-platform-tests/web-animations/responsive/lineHeight-expected.txt:
        * web-platform-tests/web-animations/responsive/opacity-expected.txt:
        * web-platform-tests/web-animations/responsive/textIndent-expected.txt:

2022-03-03  Chris Dumez  <cdumez@apple.com>

        REGRESSION(r290356-r290351?): [ iOS EWS ] 3 imported/w3c/web-platform-tests/service-workers/service-worker/* tests are constant text failures.
        https://bugs.webkit.org/show_bug.cgi?id=237160
        <rdar://problem/89440067>

        Reviewed by Youenn Fablet.

        Rebaseline test that is now passing.

        * web-platform-tests/service-workers/service-worker/fetch-request-no-freshness-headers.https-expected.txt:

2022-03-03  Martin Robinson  <mrobinson@webkit.org>

        Update WPT css-scroll-snap tests
        https://bugs.webkit.org/show_bug.cgi?id=237358

        Reviewed by Manuel Rego Casasnovas.

        * resources/import-expectations.json:
        * resources/resource-files.json:
        * web-platform-tests/css/css-scroll-snap/capturing-snap-positions-expected.txt: Added.
        * web-platform-tests/css/css-scroll-snap/capturing-snap-positions.html: Added.
        * web-platform-tests/css/css-scroll-snap/input/keyboard.html:
        * web-platform-tests/css/css-scroll-snap/input/mouse-wheel-expected.txt: Added.
        * web-platform-tests/css/css-scroll-snap/input/mouse-wheel.html: Added.
        * web-platform-tests/css/css-scroll-snap/input/snap-area-overflow-boundary-expected.txt: Added.
        * web-platform-tests/css/css-scroll-snap/input/snap-area-overflow-boundary.html: Added.
        * web-platform-tests/css/css-scroll-snap/input/w3c-import.log:
        * web-platform-tests/css/css-scroll-snap/no-red-ref.html: Added.
        * web-platform-tests/css/css-scroll-snap/scroll-snap-root-001-ref.html: Added.
        * web-platform-tests/css/css-scroll-snap/scroll-snap-root-002-ref.html: Added.
        * web-platform-tests/css/css-scroll-snap/scroll-target-001-ref.html: Added.
        * web-platform-tests/css/css-scroll-snap/scroll-target-margin-005-expected.txt: Added.
        * web-platform-tests/css/css-scroll-snap/scroll-target-margin-005.html: Added.
        * web-platform-tests/css/css-scroll-snap/selection-target-expected.txt: Added.
        * web-platform-tests/css/css-scroll-snap/selection-target.html: Added.
        * web-platform-tests/css/css-scroll-snap/snap-after-initial-layout/scroll-snap-initial-layout-000-ref.html: Added.
        * web-platform-tests/css/css-scroll-snap/snap-after-initial-layout/scroll-snap-writing-mode-000-ref.html: Added.
        * web-platform-tests/css/css-scroll-snap/snap-after-initial-layout/snap-after-initial-layout-ref.html: Added.
        * web-platform-tests/css/css-scroll-snap/snap-after-initial-layout/w3c-import.log:
        * web-platform-tests/css/css-scroll-snap/support/common.js:
        (waitForAnimationEnd.):
        (waitForAnimationEnd):
        (waitForWheelEvent):
        (waitForScrollEnd):
        (waitForScrollTo):
        * web-platform-tests/css/css-scroll-snap/w3c-import.log:

2022-03-03  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, reverting r290756.
        https://bugs.webkit.org/show_bug.cgi?id=237412

        Speedometer2

        Reverted changeset:

        "[css] Implement 'text-decoration' as a shorthand."
        https://bugs.webkit.org/show_bug.cgi?id=237175
        https://commits.webkit.org/r290756

2022-03-02  Rob Buis  <rbuis@igalia.com>

        Treat empty intersection correctly in RenderLayer::getRectToExpose
        https://bugs.webkit.org/show_bug.cgi?id=237189

        Reviewed by Simon Fraser.

        * web-platform-tests/css/css-contain/content-visibility/content-visibility-050-expected.txt:

2022-03-02  Sihui Liu  <sihui_liu@apple.com>

        Throw proper exception on failed removeEntry() calls
        https://bugs.webkit.org/show_bug.cgi?id=237382
        <rdar://89232969>

        Reviewed by Chris Dumez.

        * web-platform-tests/file-system-access/sandboxed_FileSystemDirectoryHandle-getDirectoryHandle.https.any-expected.txt:
        * web-platform-tests/file-system-access/sandboxed_FileSystemDirectoryHandle-getDirectoryHandle.https.any.worker-expected.txt:
        * web-platform-tests/file-system-access/sandboxed_FileSystemDirectoryHandle-getFileHandle.https.any-expected.txt:
        * web-platform-tests/file-system-access/sandboxed_FileSystemDirectoryHandle-getFileHandle.https.any.worker-expected.txt:
        * web-platform-tests/file-system-access/sandboxed_FileSystemDirectoryHandle-removeEntry.https.any-expected.txt:
        * web-platform-tests/file-system-access/sandboxed_FileSystemDirectoryHandle-removeEntry.https.any.worker-expected.txt:

2022-03-02  Oriol Brufau  <obrufau@igalia.com>

        [css] Implement 'text-decoration' as a shorthand.
        https://bugs.webkit.org/show_bug.cgi?id=237175

        Reviewed by Darin Adler.

        Update tests to take into account that 'text-decoration' is a shorthand.

        * web-platform-tests/css/css-cascade/all-prop-initial-xml-expected.txt:
        * web-platform-tests/css/css-variables/variable-presentation-attribute-expected.txt:
        * web-platform-tests/css/cssom/getComputedStyle-detached-subtree-expected.txt:

2022-03-02  Antoine Quint  <graouts@webkit.org>

        [web-animations] setting the composite property on a keyframe effect should invalidate the target style
        https://bugs.webkit.org/show_bug.cgi?id=237356

        Reviewed by Dean Jackson.

        * web-platform-tests/web-animations/animation-model/keyframe-effects/effect-value-context-filling-expected.txt:

2022-03-02  Antoine Quint  <graouts@webkit.org>

        [web-animations] changes to font-size should recompute keyframes
        https://bugs.webkit.org/show_bug.cgi?id=237357

        Reviewed by Antti Koivisto.

        * web-platform-tests/css/css-animations/responsive/column-width-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/keyframe-effects/effect-value-context-expected.txt:
        * web-platform-tests/web-animations/animation-model/keyframe-effects/effect-value-context-filling-expected.txt:
        * web-platform-tests/web-animations/responsive/fontSize-expected.txt:
        * web-platform-tests/web-animations/responsive/perspective-expected.txt:
        * web-platform-tests/web-animations/responsive/textIndent-expected.txt:
        * web-platform-tests/web-animations/responsive/to-style-change-expected.txt:

2022-03-01  Martin Robinson  <mrobinson@webkit.org>

        When interpolating between transform lists partial prefix matches should not use matrix interpolation
        https://bugs.webkit.org/show_bug.cgi?id=235757
        <rdar://problem/88477922>

        Reviewed by Dean Jackson.

        * web-platform-tests/css/css-transforms/animation/list-interpolation-expected.txt: Mark subtests as passing.
        * web-platform-tests/css/css-transforms/animation/transform-composition-expected.txt: Ditto.
        * web-platform-tests/css/css-transforms/animation/transform-interpolation-004-expected.txt: Ditto.

2022-03-01  Antoine Quint  <graouts@webkit.org>

        [web-animations] ::placeholder should not be a valid pseudo-element for a KeyframeEffect target
        https://bugs.webkit.org/show_bug.cgi?id=237334

        Reviewed by Dean Jackson.

        * web-platform-tests/web-animations/interfaces/Animatable/animate-expected.txt:
        * web-platform-tests/web-animations/interfaces/KeyframeEffect/target-expected.txt:

2022-03-01  Antoine Quint  <graouts@webkit.org>

        [web-animations] add support for passing an optional timeline to Element.animate()
        https://bugs.webkit.org/show_bug.cgi?id=237312

        Reviewed by Dean Jackson.

        * web-platform-tests/web-animations/interfaces/Animatable/animate-expected.txt:

2022-02-28  Jonathan Bedard  <jbedard@apple.com>

        [Python 3] Delete old pywebsocket
        https://bugs.webkit.org/show_bug.cgi?id=237274
        <rdar://problem/89558809>

        Rubber-stamped by Aakash Jain.

        * web-platform-tests/tools/pywebsocket: Removed.

2022-03-01  Antoine Quint  <graouts@webkit.org>

        [web-animations] web-animations/interfaces/Animatable/getAnimations-iframe.html is a unique failure
        https://bugs.webkit.org/show_bug.cgi?id=237314

        Reviewed by Antti Koivisto.

        Add a new test to check that both Document.getAnimations() and Element.getAnimations() correctly
        update layout on the owner document.

        * web-platform-tests/web-animations/interfaces/Animatable/getAnimations-iframe-expected.txt:
        * web-platform-tests/web-animations/interfaces/Animatable/getAnimations-iframe.html:

2022-03-01  Ziran Sun  <zsun@igalia.com>

        [Selection] Selection Range should be clamped by the current value length
        https://bugs.webkit.org/show_bug.cgi?id=237210

        Reviewed by  Darin Adler.

        Update the test expectations as some sub-tests are now passing.
        * web-platform-tests/html/semantics/forms/textfieldselection/selection-start-end-expected.txt:

2022-02-28  Antoine Quint  <graouts@webkit.org>

        [web-animations] web-animations/interfaces/Animatable/getAnimations.html is a unique failure
        https://bugs.webkit.org/show_bug.cgi?id=237271

        Reviewed by Dean Jackson.

        * web-platform-tests/web-animations/interfaces/Animatable/getAnimations-expected.txt:

2022-02-28  Antoine Quint  <graouts@webkit.org>

        [web-animations] web-animations/interfaces/KeyframeEffect/processing-a-keyframes-argument-001.html is a unique failure
        https://bugs.webkit.org/show_bug.cgi?id=237259

        Reviewed by Dean Jackson.

        * web-platform-tests/web-animations/interfaces/KeyframeEffect/processing-a-keyframes-argument-001-expected.txt:

2022-02-27  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, reverting r290577.
        https://bugs.webkit.org/show_bug.cgi?id=237264

        Breaks ios-wk2 layout test.

        Reverted changeset:

        "Compute correct containing block override size for items that
        are subgridden in one dimension only."
        https://bugs.webkit.org/show_bug.cgi?id=236951
        https://commits.webkit.org/r290577

2022-02-27  Matt Woodrow  <mattwoodrow@apple.com>

        Compute correct containing block override size for items that are subgridden in one dimension only.
        https://bugs.webkit.org/show_bug.cgi?id=236951

        Reviewed by Dean Jackson.

        Added new WPT similar to auto-track-sizing-001 which adds new variations
        with nested subgrids and varying whether the other axis is subgridded.

        * web-platform-tests/css/css-grid/subgrid/auto-track-sizing-002-expected.html: Added.
        * web-platform-tests/css/css-grid/subgrid/auto-track-sizing-002.html: Added.

2022-02-27  Antoine Quint  <graouts@webkit.org>

        [web-animations] web-animations/timing-model/animations/setting-the-timeline-of-an-animation.html is a unique failure
        https://bugs.webkit.org/show_bug.cgi?id=237257

        Reviewed by Dean Jackson.

        Mark WPT progressions.

        * web-platform-tests/web-animations/timing-model/animations/setting-the-timeline-of-an-animation-expected.txt:

2022-02-27  Antoine Quint  <graouts@webkit.org>

        [svg] flood-opacity should be clamped to the [0,1] range
        https://bugs.webkit.org/show_bug.cgi?id=237253

        Reviewed by Dean Jackson.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:

2022-02-27  Antoine Quint  <graouts@webkit.org>

        [svg] stroke-opacity should be clamped to the [0,1] range
        https://bugs.webkit.org/show_bug.cgi?id=237254

        Reviewed by Dean Jackson.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:

2022-02-27  Antoine Quint  <graouts@webkit.org>

        [svg] stop-opacity should be clamped to the [0,1] range
        https://bugs.webkit.org/show_bug.cgi?id=237255

        Reviewed by Dean Jackson.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-002-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-002-expected.txt:

2022-02-27  Antoine Quint  <graouts@webkit.org>

        [svg] fill-opacity should be clamped to the [0,1] range
        https://bugs.webkit.org/show_bug.cgi?id=237252

        Reviewed by Dean Jackson.

        * web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-001-expected.txt:
        * web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-001-expected.txt:

2022-02-27  Tim Nguyen  <ntim@apple.com>

        Force -webkit-user-modify used style to readonly for inert nodes
        https://bugs.webkit.org/show_bug.cgi?id=237244

        Reviewed by Darin Adler.

        This disallows programmatic edition of contenteditable inert nodes. Edition via user-input is
        already prevented by forcing pointer-events style to none.

        We create a seperate effectiveUserModify, similar to effectiveUserSelect/effectivePointerEvents,
        to avoid changing the computed style.

        This behaviour also matches Blink & Gecko.

        * web-platform-tests/inert/inert-and-contenteditable.tentative-expected.txt:

2022-02-27  Antoine Quint  <graouts@webkit.org>

        [css-animations] implicit keyframes should be inserted after explicit keyframes with the same offset
        https://bugs.webkit.org/show_bug.cgi?id=237246

        Reviewed by Dean Jackson.

        Update WPT test added in bug 236838 to match the spec following discussion with Brian Birtles in
        https://github.com/web-platform-tests/wpt/pull/32903.

        * web-platform-tests/css/css-animations/KeyframeEffect-getKeyframes.tentative.html:

2022-02-27  Tim Nguyen  <ntim@apple.com>

        Re-import inert and <dialog> WPT
        https://bugs.webkit.org/show_bug.cgi?id=237243

        Reviewed by Youenn Fablet.

        Upstream commit: https://github.com/web-platform-tests/wpt/commit/9261ca87db106c1f31f1ab4f54b8f4a2617cbc24

        * web-platform-tests/html/semantics/interactive-elements/the-dialog-element/modal-dialog-in-replaced-renderer-expected.html:
        * web-platform-tests/html/semantics/interactive-elements/the-dialog-element/modal-dialog-in-replaced-renderer-ref.html:
        * web-platform-tests/html/semantics/interactive-elements/the-dialog-element/modal-dialog-in-replaced-renderer.html:
        * web-platform-tests/html/semantics/interactive-elements/the-dialog-element/modal-dialog-in-table-column-expected.html:
        * web-platform-tests/html/semantics/interactive-elements/the-dialog-element/modal-dialog-in-table-column-ref.html:
        * web-platform-tests/html/semantics/interactive-elements/the-dialog-element/modal-dialog-in-table-column.html:
        * web-platform-tests/html/semantics/interactive-elements/the-dialog-element/w3c-import.log:
        * web-platform-tests/inert/inert-and-contenteditable.tentative-expected.txt: Added.
        * web-platform-tests/inert/inert-and-contenteditable.tentative.html: Added.
        * web-platform-tests/inert/inert-iframe-hittest.tentative-expected.txt:
        * web-platform-tests/inert/inert-iframe-hittest.tentative.html:
        * web-platform-tests/inert/inert-iframe-tabbing.tentative-expected.txt:
        * web-platform-tests/inert/inert-iframe-tabbing.tentative.html:
        * web-platform-tests/inert/w3c-import.log:

2022-02-26  Tim Nguyen  <ntim@apple.com>

        Remove Node::deprecatedIsInert
        https://bugs.webkit.org/show_bug.cgi?id=230845

        Reviewed by Antti Koivisto.

        This change unfortunately regresses focusability state when dynamically setting inert, due to a cached
        computed style invalidation bug. This is minor in practice, since focusability usually gets queried in
        user-initiated ways, when style already has fully been updated.

        However, making this change will improve performance by avoiding a full DOM ancestor walk when there
        is no inert attribute on the page, since we will only check a style bit after this patch.

        * web-platform-tests/html/semantics/interactive-elements/the-dialog-element/remove-dialog-should-unblock-document-expected.txt:
        * web-platform-tests/inert/inert-canvas-fallback-content.tentative-expected.txt:
        * web-platform-tests/inert/inert-node-is-unfocusable.tentative-expected.txt:

2022-02-26  Kate Cheney  <katherine_cheney@apple.com>

        Update CSP handling of javascript URLs
        https://bugs.webkit.org/show_bug.cgi?id=236351
        <rdar://problem/88675827>

        Reviewed by Brent Fulgham.

        * web-platform-tests/content-security-policy/navigation/to-javascript-parent-initiated-parent-csp-disallow-expected.txt:
        * web-platform-tests/content-security-policy/navigation/to-javascript-url-script-src-expected.txt:

2022-02-24  Oriol Brufau  <obrufau@igalia.com>

        [css-cascade] Support 'revert' in @keyframes
        https://bugs.webkit.org/show_bug.cgi?id=237073

        Reviewed by Darin Adler.

        Expect tests to pass.

        * web-platform-tests/css/css-cascade/revert-val-006-expected.txt:
        * web-platform-tests/css/css-cascade/revert-val-007-expected.txt:
        * web-platform-tests/css/css-cascade/revert-val-008-expected.txt:
        * web-platform-tests/css/css-cascade/revert-val-010-expected.txt:

2022-02-24  Alan Bujtas  <zalan@apple.com>

        [IFC][Integration] Enable non-paginated vertical-rl writing mode
        https://bugs.webkit.org/show_bug.cgi?id=236897

        Reviewed by Antti Koivisto.

        * web-platform-tests/css/cssom-view/offsetTopLeft-empty-inline-expected.txt:
        * web-platform-tests/css/cssom-view/offsetTopLeft-leading-space-inline-expected.txt:

2022-02-24  Chris Dumez  <cdumez@apple.com>

        Unreviewed, add some logging to imported/w3c/web-platform-tests/workers/semantics/multiple-workers/004.html to debug flakiness

        * web-platform-tests/workers/semantics/multiple-workers/004.html:

2022-02-24  Martin Robinson  <mrobinson@webkit.org>

        Implement logical properties for CSS overscroll-behavior
        https://bugs.webkit.org/show_bug.cgi?id=237080

        Reviewed by Simon Fraser.

        * web-platform-tests/css/css-overscroll-behavior/inheritance-expected.txt: Update expectations for passing tests.
        * web-platform-tests/css/css-overscroll-behavior/overscroll-behavior-logical-expected.txt: Ditto.
        * web-platform-tests/css/css-overscroll-behavior/parsing/overscroll-behavior-computed-expected.txt: Ditto.
        * web-platform-tests/css/css-overscroll-behavior/parsing/overscroll-behavior-valid-expected.txt: Ditto.

2022-02-23  Antti Koivisto  <antti@apple.com>

        [CSS Container Queries] offsetWidth/Height and similar should update layout for container queries
        https://bugs.webkit.org/show_bug.cgi?id=237079

        Reviewed by Simon Fraser.

        * web-platform-tests/css/css-contain/container-queries/auto-scrollbars-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/inline-size-containment-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/inline-size-containment-vertical-rl-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/transition-scrollbars-expected.txt:

2022-02-22  Antti Koivisto  <antti@apple.com>

        [CSS container Queries] getComputedStyle should update style for invalid query containers
        https://bugs.webkit.org/show_bug.cgi?id=237038

        Reviewed by Darin Adler.

        * web-platform-tests/css/css-contain/container-queries/animation-container-size-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/animation-container-type-dynamic-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/animation-nested-animation-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/animation-nested-transition-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/aspect-ratio-feature-evaluation-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/backdrop-invalidation-expected.txt:
        * web-platform-tests/css/css-contain/container-queries/pseudo-elements-001-expected.txt:

2022-02-22  Tim Nguyen  <ntim@apple.com>

        Make pointer-events checks for SVG take in account inert subtrees
        https://bugs.webkit.org/show_bug.cgi?id=235836

        Reviewed by Antti Koivisto.

        Added tests for both inert attribute & modal dialog cases.

        * web-platform-tests/html/semantics/interactive-elements/the-dialog-element/inert-svg-hittest-expected.txt: Added.
        * web-platform-tests/html/semantics/interactive-elements/the-dialog-element/inert-svg-hittest.html: Added.
        * web-platform-tests/inert/inert-svg-hittest.tentative-expected.txt: Added.
        * web-platform-tests/inert/inert-svg-hittest.tentative.html: Added.

2022-02-22  Marcos Caceres  <marcos@marcosc.com>

        Permission API: handle non-fully active documents
        https://bugs.webkit.org/show_bug.cgi?id=236952

        Web Platform Test
        https://github.com/web-platform-tests/wpt/pull/32921

        Reviewed by Youenn Fablet.

        * web-platform-tests/permissions/non-fully-active.https-expected.txt: Added.
        * web-platform-tests/permissions/non-fully-active.https.html: Added.
        * web-platform-tests/permissions/resources/empty.html: Added.

2022-02-22  Asumu Takikawa  <asumu@igalia.com>

        Initial support for Wasm/ESM-integration in the WebCore module loader
        https://bugs.webkit.org/show_bug.cgi?id=236268

        Reviewed by Yusuke Suzuki.

        Add test suite for Wasm/ESM integration proposal to WPT Wasm WebAPI
        tests.

        * web-platform-tests/wasm/webapi/esm-integration/execute-start.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/execute-start.tentative.html: Added.
        * web-platform-tests/wasm/webapi/esm-integration/exported-names.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/exported-names.tentative.html: Added.
        * web-platform-tests/wasm/webapi/esm-integration/invalid-bytecode.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/invalid-bytecode.tentative.html: Added.
        * web-platform-tests/wasm/webapi/esm-integration/js-wasm-cycle-errors.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/js-wasm-cycle-errors.tentative.html: Added.
        * web-platform-tests/wasm/webapi/esm-integration/js-wasm-cycle.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/js-wasm-cycle.tentative.html: Added.
        * web-platform-tests/wasm/webapi/esm-integration/module-parse-error.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/module-parse-error.tentative.html: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resolve-export.js: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resolve-export.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resolve-export.tentative.html: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/execute-start.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/exported-names.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/invalid-bytecode.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/invalid-module.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/js-wasm-cycle-function-error.js: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/js-wasm-cycle-function-error.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/js-wasm-cycle-global.js: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/js-wasm-cycle-global.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/js-wasm-cycle-memory.js: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/js-wasm-cycle-memory.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/js-wasm-cycle-table.js: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/js-wasm-cycle-table.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/js-wasm-cycle-value.js: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/js-wasm-cycle-value.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/js-wasm-cycle.js: Added.
        (f):
        * web-platform-tests/wasm/webapi/esm-integration/resources/js-wasm-cycle.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/log.js: Added.
        (export.logExec):
        * web-platform-tests/wasm/webapi/esm-integration/resources/resolve-export.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-export-i64-global.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-export-to-wasm.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-import-error-from-wasm.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-import-from-wasm.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-import-func.js: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-import-func.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-import-global.js: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-import-global.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-import-memory.js: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-import-memory.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-import-table.js: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-import-table.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-js-cycle.js: Added.
        (let.jsFunc):
        (export.mutateBindings):
        * web-platform-tests/wasm/webapi/esm-integration/resources/wasm-js-cycle.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/worker-helper.js: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/worker.js: Added.
        * web-platform-tests/wasm/webapi/esm-integration/resources/worker.wasm: Added.
        * web-platform-tests/wasm/webapi/esm-integration/wasm-import-wasm-export.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/wasm-import-wasm-export.tentative.html: Added.
        * web-platform-tests/wasm/webapi/esm-integration/wasm-import.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/wasm-import.tentative.html: Added.
        * web-platform-tests/wasm/webapi/esm-integration/wasm-js-cycle.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/wasm-js-cycle.tentative.html: Added.
        * web-platform-tests/wasm/webapi/esm-integration/wasm-to-wasm-link-error.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/wasm-to-wasm-link-error.tentative.html: Added.
        * web-platform-tests/wasm/webapi/esm-integration/worker-import.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/worker-import.tentative.html: Added.
        * web-platform-tests/wasm/webapi/esm-integration/worker.tentative-expected.txt: Added.
        * web-platform-tests/wasm/webapi/esm-integration/worker.tentative.html: Added.

== Rolled over to ChangeLog-2022-02-22 ==
